const axios = require("axios").default;

module.exports = {

    getUser: async function getUser(username) {

    const noUsername = {
        "status": "400",
        "why": "Username isn't provided."
    }

    if(!username) return noUsername;
    
    const mainUserData = await axios.get(`https://api.ashcon.app/mojang/v2/user/${username}`).catch(error => {
        const err = {
            "status": "failed",
            "why": `There is no user with the name: ${username}`
        }

        return err;

    })

    const err = {
        "status": "failed",
        "why": `There is no user with the name: ${username}`
    }
    

    if(!mainUserData || !mainUserData.data) return err;

    const userInfo = {
        "status": "success",
        "uuid": mainUserData.data.uuid,
        "username": mainUserData.data.username,
        "username_history": mainUserData.data.username_history,
        "created_at": mainUserData.data.created_at,
        "skin_info": {
            "custom": mainUserData.data.textures.custom,
            "slim": mainUserData.data.textures.slim,
        },
        "skin": {
            "skin_url": mainUserData.data.textures.skin.url,
            "avatar": `https://crafatar.com/avatars/${mainUserData.data.uuid}`
        },
        "skin_renders": {
            "head_render": `https://crafatar.com/renders/head/${mainUserData.data.uuid}`,
            "body_render": `https://crafatar.com/renders/body/${mainUserData.data.uuid}`
        }
    }

    return userInfo;
}
}

